#! This plugin tells a joke, or not

select {
  "message": {
    "channel_id": event.channel_id,
    "update": {
      "message_id": event.id,
      "add_reactions": ["ğŸ˜‚"],
    },
    "send":{
      "reference_message": event.id,
      "content": "<@#{event.author.id}>, that's not funny.",
      "reactions": ["ğŸ˜‚"],
    }
  }
} from in where
  match event of
    case %{content ~= glob|*tell me a joke|} => true
    default => false
  end
 into out;